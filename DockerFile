FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get install -y \
    build-essential \
    cmake \
    g++ \
    libcurl4-openssl-dev \
    ca-certificates \
    && update-ca-certificates

WORKDIR /app

COPY backend/ ./backend/
COPY lib/ ./lib/

WORKDIR /app/build

RUN cmake ../backend && make

ENV LD_LIBRARY_PATH=/app/build

CMD ["./backend"]
